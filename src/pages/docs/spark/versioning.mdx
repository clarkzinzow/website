---
description: Learn how Delta table protocols are versioned.
---

import { ApacheSpark, DeltaLake } from "/src/components/Attributions";
import { CBCreateTable } from "/src/components/CodeBlocks";

<a id="table-version"></a>

# Table protocol versioning

The transaction log for a Delta table contains protocol versioning information that supports <DeltaLake /> evolution. <DeltaLake /> tracks minimum [reader and writer versions](/delta/delta-utility.md#detail-schema) separately.

<DeltaLake /> guarantees *backward compatibility*. A higher protocol version
of <DeltaLake /> reader is always able to read data that was written by a lower
protocol version.

<DeltaLake /> will occasionally break *forward compatibility*. Lower protocol
versions of <DeltaLake /> may not be able to read and write data that was
written by a higher protocol version of <DeltaLake />. If you try to read and
write to a table with a protocol version of <DeltaLake /> that is too low,
you'll get an error telling you that you need to upgrade.

When creating a table, <DeltaLake /> chooses the minimum required protocol version based on table characteristics such as the schema or table properties. You can also set the default protocol versions by setting the SQL configurations:

- `spark.databricks.delta.properties.defaults.minWriterVersion = 2` (default)
- `spark.databricks.delta.properties.defaults.minReaderVersion = 1` (default)

To upgrade a table to a newer protocol version, use the `DeltaTable.upgradeTableProtocol` method:

<CBCreateTable
      sql={
    <div>

```sql
-- Upgrades the reader protocol version to 1 and the writer protocol version to 3.
ALTER TABLE <table_identifier> SET TBLPROPERTIES('delta.minReaderVersion' = '1', 'delta.minWriterVersion' = '3')
```

</div>
      }
    />

<CBCreateTable
      python={
    <div>

```python
from delta.tables import DeltaTable
delta = DeltaTable.forPath(spark, "path_to_table") # or DeltaTable.forName
delta.upgradeTableProtocol(1, 3) # upgrades to readerVersion=1, writerVersion=3
```

</div>
      }
    />

<CBCreateTable
  scala={
    <div>
      ```scala import io.delta.tables.DeltaTable val delta =
      DeltaTable.forPath(spark, "path_to_table") // or DeltaTable.forName
      delta.upgradeTableProtocol(1, 3) // Upgrades to readerVersion=1,
      writerVersion=3. ```
    </div>
  }
/>

## Features by protocol version

<!-- Source: https://docs.google.com/spreadsheets/d/1MyhJjUnq0Rmd3JOvrdA6-g1oH48hxrRheQbNLshpkxA/edit -->

| Feature             | `minWriterVersion` | `minReaderVersion` | Introduced in                        | Documentation                                      |
| ------------------- | ------------------ | ------------------ | ------------------------------------ | -------------------------------------------------- |
| Basic functionality | 2                  | 1                  | --                                   | [\_](/delta/index.md)                              |
| `CHECK` constraints | 3                  | 1                  | [\_](/release-notes/runtime/7.4.md)  | [\_](/delta/delta-constraints.md#check-constraint) |
| Change data feed    | 4                  | 1                  | [\_](/release-notes/runtime/8.4.md)  | [\_](/delta/delta-change-data-feed.md)             |
| Generated columns   | 4                  | 1                  | [\_](/release-notes/runtime/8.3.md)  | [\_](/delta/delta-batch.md#use-generated-columns)  |
| Column mapping      | 5                  | 2                  | [\_](/release-notes/runtime/10.2.md) | [\_](/delta/delta-column-mapping.md)               |
